version: '3.4'

services:
  mavenhibernate:
    image: mavenhibernate
    build:
      context: .
      dockerfile: ./Dockerfile
    environment:
      JAVA_OPTS: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005,quiet=y
    ports:
      - 3000:3000
      - 5005:5005
  mysql:
      image: mysql:5.7
      ports:
       - "3306:3306"
      environment:
        - MYSQL_ROOT_PASSWORD=petclinic
        - MYSQL_DATABASE=petclinic
      volumes:
          - "./conf.d:/etc/mysql/conf.d:ro"